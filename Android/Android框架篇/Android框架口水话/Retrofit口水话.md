使用Retrofit时首先通过Retrofit.Builder建造者模式创建一个Retrofit对象，可以通过Retrofit.Builder设置请求适配器CallAdapter，例如可以适配RxJava，设置数据转换器Converter，例如可以设置Gson。

然后我们调用Retrofit的create方法来获得我们定义的接口Service的实现。create方法是通过Proxy.newProxyInstance的方式来得到一个动态代理对象。

当我们调用Service中的接口请求时，会得到一个Call对象，实际上就是调用InvocationHandler的invoke方法，然后会执行loadServiceMethod获取一个ServiceMethod对象并调用它的invoke方法。

loadServiceMethod方法中，会从一个ConcurrentHashMap中取出一个ServiceMethod缓存，如果没有缓存，则通过ServiceMethod类的静态方法parseAnnotations创建一个，并加入缓存。

parseAnnotations中会通过动态代理传入的Method创建一个RequestFactory，它也是通过建造者模式创建的，在它的build方法中，会检测我们的注解是否使用正确，比如@Field必须要用Form-encoded

然后会调用HttpServiceMethod.parseAnntotations方法，这个方法里根据我们设置的请求适配器CallAdapter，以及数据转化器Converter以及Retrofit中设置的OkHttpClient，创建一个HttpServiceMethod。

即我们会调用HttpServiceMethod的invoke方法，它的invoke方法中会创建OkHttpCall对象，然后调用CallAdapter的adapt方法中，获得一个Call对象，Retrofit默认的CallAdapter是一个匿名内部类，它会创建一个ExecutorCallbackCall。

ExecutorCallbackCall是OkHttpCall的代理类，当我们用enqueue或者execute的时候，会执行OkHttpCall的的相同的方法，在这些方法中会创建具体的OkHttp中的Call并执行请求，然后通过数据转化器转为我们设置的类。

